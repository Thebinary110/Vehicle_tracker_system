(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2554:function(e,t,r){Promise.resolve().then(r.bind(r,7168))},7168:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var s=r(7437),a=r(2265),n=r(8728),l=r(4415),i=r(5884),o=r(9076),c=r(9227),d=r(3276),u=r(1239),m=r(476),x=r(1723),g=r(3774);function b(e){let{isPlaying:t,onTogglePlayPause:r,onReset:a,onToggleFullscreen:b,onToggleRouteBuilder:h,speed:p,elapsedTime:f,currentCoordinates:y,playbackSpeed:j,onPlaybackSpeedChange:v,isFullscreen:w,showRouteBuilder:N,hasRoute:k}=e;return(0,s.jsxs)("div",{className:"absolute top-4 left-4 w-96 bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-200/50 p-6 z-[1000]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Vehicle Tracker"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Custom route simulation"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:h,className:"flex items-center justify-center w-10 h-10 ".concat(N?"bg-blue-500 text-white":"bg-gray-100 text-gray-600"," hover:bg-blue-600 hover:text-white rounded-xl transition-all duration-200"),"aria-label":"Toggle route builder",children:(0,s.jsx)(n.Z,{size:18})}),(0,s.jsx)("button",{onClick:b,className:"flex items-center justify-center w-10 h-10 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-xl transition-all duration-200","aria-label":w?"Exit fullscreen":"Enter fullscreen",children:w?(0,s.jsx)(l.Z,{size:18}):(0,s.jsx)(i.Z,{size:18})})]})]}),!k&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,s.jsx)("strong",{children:"No route created yet."})," Use the Route Builder to add waypoints and generate a road-following route."]})}),(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,s.jsx)("button",{onClick:a,disabled:!k,className:"flex items-center justify-center w-12 h-12 bg-gray-100 hover:bg-gray-200 disabled:bg-gray-50 disabled:text-gray-400 text-gray-600 rounded-xl transition-all duration-200 hover:scale-105","aria-label":"Reset",children:(0,s.jsx)(o.Z,{size:20})}),(0,s.jsx)("button",{onClick:r,disabled:!k,className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-2xl transition-all duration-200 hover:scale-105 shadow-lg","aria-label":t?"Pause":"Play",children:t?(0,s.jsx)(c.Z,{size:24}):(0,s.jsx)(d.Z,{size:24})}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(u.Z,{size:16,className:"text-gray-500 mb-1"}),(0,s.jsx)("select",{value:j,onChange:e=>v(Number(e.target.value)),disabled:!k,className:"text-sm bg-gray-100 border-0 rounded-lg px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:bg-gray-50 disabled:text-gray-400",children:[.5,1,2,4].map(e=>(0,s.jsxs)("option",{value:e,children:[e,"x"]},e))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-green-100 rounded-xl",children:(0,s.jsx)(m.Z,{size:18,className:"text-green-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current Speed"}),(0,s.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[p.toFixed(1)," km/h"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 rounded-xl",children:(0,s.jsx)(x.Z,{size:18,className:"text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Elapsed Time"}),(0,s.jsx)("p",{className:"text-lg font-bold text-gray-800",children:"".concat(Math.floor(f/60).toString().padStart(2,"0"),":").concat(Math.floor(f%60).toString().padStart(2,"0"))})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-xl mt-1",children:(0,s.jsx)(g.Z,{size:18,className:"text-purple-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current Position"}),(0,s.jsx)("p",{className:"text-sm font-mono text-gray-800 break-all leading-relaxed",children:y?"".concat(y[0].toFixed(6),", ").concat(y[1].toFixed(6)):"N/A"})]})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-center mt-4 pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:k?t?"Tracking Active":"Tracking Paused":"No Route"})]})})]})}var h=r(29),p=r.n(h);function f(e){let{currentPosition:t,routePath:r,totalRoute:n,waypoints:l,onMapClick:i,showRouteBuilder:o,isPlaying:c}=e,d=(0,a.useRef)(null),u=(0,a.useRef)(null),m=(0,a.useRef)(null),x=(0,a.useRef)(null),g=(0,a.useRef)(null),b=(0,a.useRef)([]);return(0,a.useEffect)(()=>{if(d.current&&window.L){if(!u.current){let e=t||l[0]?[l[0].lat,l[0].lng]:[17.385044,78.486671];u.current=window.L.map(d.current,{center:e,zoom:16,zoomControl:!1,attributionControl:!1,preferCanvas:!0}),window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors",maxZoom:19}).addTo(u.current),window.L.control.zoom({position:"bottomright"}).addTo(u.current),u.current.on("click",e=>{o&&i(e.latlng.lat,e.latlng.lng)});let r=window.L.divIcon({html:'\n          <div class="vehicle-marker">\n            <div class="vehicle-body">\n              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">\n                <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z" fill="white"/>\n              </svg>\n            </div>\n            <div class="vehicle-pulse"></div>\n          </div>\n        ',className:"",iconSize:[40,40],iconAnchor:[20,20]});t&&(m.current=window.L.marker(t,{icon:r,zIndexOffset:1e3}).addTo(u.current))}if(b.current.forEach(e=>{u.current.removeLayer(e)}),b.current=[],l.forEach((e,t)=>{let r=window.L.divIcon({html:'\n          <div class="waypoint-marker">\n            <div class="waypoint-number">'.concat(t+1,"</div>\n          </div>\n        "),className:"",iconSize:[30,30],iconAnchor:[15,15]}),s=window.L.marker([e.lat,e.lng],{icon:r,zIndexOffset:500}).addTo(u.current);b.current.push(s)}),n.length>1&&(g.current&&u.current.removeLayer(g.current),g.current=window.L.polyline(n,{color:"#e5e7eb",weight:3,opacity:.6,dashArray:"5, 10"}).addTo(u.current)),t&&u.current){if(m.current)m.current.setLatLng(t);else{let e=window.L.divIcon({html:'\n            <div class="vehicle-marker">\n              <div class="vehicle-body">\n                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">\n                  <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z" fill="white"/>\n                </svg>\n              </div>\n              <div class="vehicle-pulse"></div>\n            </div>\n          ',className:"",iconSize:[40,40],iconAnchor:[20,20]});m.current=window.L.marker(t,{icon:e,zIndexOffset:1e3}).addTo(u.current)}c&&u.current.panTo(t,{animate:!0,duration:.5})}if(r.length>1&&u.current&&(x.current&&u.current.removeLayer(x.current),x.current=window.L.polyline(r,{color:"#3b82f6",weight:4,opacity:.9,lineCap:"round",lineJoin:"round"}).addTo(u.current)),l.length>0||n.length>0){let e=window.L.latLngBounds();l.forEach(t=>{e.extend([t.lat,t.lng])}),n.length>0&&n.forEach(t=>{e.extend(t)}),e.isValid()&&u.current.fitBounds(e,{padding:[50,50]})}return()=>{u.current&&(b.current.forEach(e=>{u.current.removeLayer(e)}),b.current=[])}}},[t,r,n,l,i,o,c]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:d,className:"jsx-270d2bc53e4e368c w-full h-full"}),(0,s.jsx)(p(),{id:"270d2bc53e4e368c",children:".vehicle-marker.jsx-270d2bc53e4e368c{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.vehicle-body.jsx-270d2bc53e4e368c{width:36px;height:36px;background:-webkit-linear-gradient(315deg,#3b82f6,#1d4ed8);background:-moz-linear-gradient(315deg,#3b82f6,#1d4ed8);background:-o-linear-gradient(315deg,#3b82f6,#1d4ed8);background:linear-gradient(135deg,#3b82f6,#1d4ed8);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-shadow:0 4px 12px rgba(59,130,246,.4);-moz-box-shadow:0 4px 12px rgba(59,130,246,.4);box-shadow:0 4px 12px rgba(59,130,246,.4);border:2px solid white;z-index:2;position:relative}.vehicle-pulse.jsx-270d2bc53e4e368c{position:absolute;width:40px;height:40px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:rgba(59,130,246,.3);-webkit-animation:pulse 2s infinite;-moz-animation:pulse 2s infinite;-o-animation:pulse 2s infinite;animation:pulse 2s infinite}.waypoint-marker.jsx-270d2bc53e4e368c{width:30px;height:30px;background:-webkit-linear-gradient(315deg,#10b981,#059669);background:-moz-linear-gradient(315deg,#10b981,#059669);background:-o-linear-gradient(315deg,#10b981,#059669);background:linear-gradient(135deg,#10b981,#059669);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-shadow:0 2px 8px rgba(16,185,129,.4);-moz-box-shadow:0 2px 8px rgba(16,185,129,.4);box-shadow:0 2px 8px rgba(16,185,129,.4);border:2px solid white}.waypoint-number.jsx-270d2bc53e4e368c{color:white;font-weight:bold;font-size:12px}@-webkit-keyframes pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}100%{-webkit-transform:scale(2);transform:scale(2);opacity:0}}@-moz-keyframes pulse{0%{-moz-transform:scale(1);transform:scale(1);opacity:1}100%{-moz-transform:scale(2);transform:scale(2);opacity:0}}@-o-keyframes pulse{0%{-o-transform:scale(1);transform:scale(1);opacity:1}100%{-o-transform:scale(2);transform:scale(2);opacity:0}}@keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1);opacity:1}100%{-webkit-transform:scale(2);-moz-transform:scale(2);-o-transform:scale(2);transform:scale(2);opacity:0}}"})]})}var y=r(8406),j=r(7877);function v(e){let{currentIndex:t,totalPoints:r,distance:a,remainingDistance:n}=e,l=r>0?t/(r-1)*100:0,i=e=>e<1e3?"".concat(e.toFixed(0),"m"):"".concat((e/1e3).toFixed(2),"km");return(0,s.jsxs)("div",{className:"absolute bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-200/50 p-4 z-[1000]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,s.jsx)(y.Z,{size:20,className:"mr-2 text-blue-600"}),"Route Progress"]}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[Math.round(l),"%"]})]}),(0,s.jsxs)("div",{className:"relative mb-4",children:[(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-500 ease-out relative overflow-hidden",style:{width:"".concat(l,"%")},children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,s.jsx)("span",{children:"Start"}),(0,s.jsx)("span",{children:"Destination"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg",children:[(0,s.jsx)(j.Z,{size:16,className:"text-green-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Completed"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:i(a-n)})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg",children:[(0,s.jsx)(g.Z,{size:16,className:"text-orange-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Remaining"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:i(n)})]})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-center mt-3 pt-3 border-t border-gray-200",children:(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Point ",t+1," of ",r]})})]})}var w=r(2489),N=r(9397),k=r(8930),z=r(9322),C=r(1671);function R(e){let{waypoints:t,onAddWaypoint:r,onRemoveWaypoint:n,onUpdateWaypoint:l,onGenerateRoute:i,onClearRoute:o,isGenerating:c,routeError:d,onClose:u,hasRoute:m}=e,[x,b]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),f=(e,r,s)=>{let a=Number.parseFloat(s);if(isNaN(a))return;let n=t.find(t=>t.id===e);n&&("lat"===r?l(e,a,n.lng):l(e,n.lat,a))};return(0,s.jsxs)("div",{className:"absolute top-4 right-4 w-80 bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-200/50 p-6 z-[1001] max-h-[calc(100vh-2rem)] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(y.Z,{size:20,className:"mr-2 text-blue-600"}),(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Route Builder"})]}),(0,s.jsx)("button",{onClick:u,className:"flex items-center justify-center w-8 h-8 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg transition-colors",children:(0,s.jsx)(w.Z,{size:16})})]}),(0,s.jsx)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,s.jsx)("strong",{children:"How to use:"}),(0,s.jsx)("br",{}),"1. Add waypoints by entering coordinates or clicking on the map",(0,s.jsx)("br",{}),'2. Click "Generate Route" to create a road-following path',(0,s.jsx)("br",{}),"3. Use play controls to start vehicle simulation"]})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Add Waypoint"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"number",placeholder:"Latitude",value:x,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"any"}),(0,s.jsx)("input",{type:"number",placeholder:"Longitude",value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"any"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=Number.parseFloat(x),t=Number.parseFloat(h);if(isNaN(e)||isNaN(t)){alert("Please enter valid coordinates");return}if(e<-90||e>90){alert("Latitude must be between -90 and 90");return}if(t<-180||t>180){alert("Longitude must be between -180 and 180");return}r(e,t),b(""),p("")},className:"w-full flex items-center justify-center px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:[(0,s.jsx)(N.Z,{size:16,className:"mr-2"}),"Add Waypoint"]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Waypoints (",t.length,")"]}),0===t.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(g.Z,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"No waypoints added yet"}),(0,s.jsx)("p",{className:"text-xs",children:"Click on the map or enter coordinates above"})]}):(0,s.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-6 h-6 bg-blue-500 text-white rounded-full text-xs font-bold",children:t+1}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-1",children:[(0,s.jsx)("input",{type:"number",value:e.lat.toFixed(6),onChange:t=>f(e.id,"lat",t.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs",step:"any"}),(0,s.jsx)("input",{type:"number",value:e.lng.toFixed(6),onChange:t=>f(e.id,"lng",t.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs",step:"any"})]}),(0,s.jsx)("button",{onClick:()=>n(e.id),className:"flex items-center justify-center w-6 h-6 bg-red-100 hover:bg-red-200 text-red-600 rounded transition-colors",children:(0,s.jsx)(k.Z,{size:12})})]},e.id))})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:i,disabled:t.length<2||c,className:"w-full flex items-center justify-center px-4 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors font-medium",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Generating Route..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z,{size:16,className:"mr-2"}),"Generate Route (",t.length>=2?"Ready":"Need ".concat(2-t.length," more"),")"]})}),m&&(0,s.jsxs)("button",{onClick:o,className:"w-full flex items-center justify-center px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:[(0,s.jsx)(k.Z,{size:16,className:"mr-2"}),"Clear Route"]})]}),d&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(z.Z,{size:16,className:"text-red-600 mr-2"}),(0,s.jsx)("p",{className:"text-sm text-red-800",children:d})]})}),m&&!d&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(C.Z,{size:16,className:"text-green-600 mr-2"}),(0,s.jsx)("p",{className:"text-sm text-green-800",children:"Route generated successfully! You can now start the simulation."})]})}),(0,s.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h5",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Sample Coordinates (Hyderabad)"}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,s.jsx)("div",{children:"Start: 17.385044, 78.486671"}),(0,s.jsx)("div",{children:"End: 17.385265, 78.486895"})]})]})]})}function S(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(1),[l,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!0),{waypoints:m,roadRoute:x,isGeneratingRoute:g,addWaypoint:h,removeWaypoint:p,updateWaypoint:y,generateRoute:j,clearRoute:w,routeError:N}=function(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)([]),[n,l]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null),c=(0,a.useCallback)((r,s)=>{let a={id:"waypoint-".concat(Date.now(),"-").concat(Math.random()),lat:r,lng:s,name:"Waypoint ".concat(e.length+1)};t(e=>[...e,a])},[e.length]),d=(0,a.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),u=(0,a.useCallback)((e,r,s)=>{t(t=>t.map(t=>t.id===e?{...t,lat:r,lng:s}:t))},[]),m=(0,a.useCallback)(async()=>{if(e.length<2){o("At least 2 waypoints are required to generate a route");return}l(!0),o(null);try{let t=e.map(e=>"".concat(e.lng,",").concat(e.lat)).join(";"),r=await fetch("https://router.project-osrm.org/route/v1/driving/".concat(t,"?overview=full&geometries=geojson&steps=true"));if(!r.ok)throw Error("Routing service error: ".concat(r.status));let a=await r.json();if("Ok"!==a.code||!a.routes||0===a.routes.length)throw Error("No route found between the waypoints");let n=a.routes[0].geometry.coordinates.map((e,t)=>({lat:e[1],lng:e[0],timestamp:Date.now()+5e3*t}));s(n),o(null)}catch(t){console.error("Route generation error:",t),o(t instanceof Error?t.message:"Failed to generate route. Please check your waypoints and try again."),s(e.map((e,t)=>({lat:e.lat,lng:e.lng,timestamp:Date.now()+1e4*t})))}finally{l(!1)}},[e]);return{waypoints:e,roadRoute:r,isGeneratingRoute:n,routeError:i,addWaypoint:c,removeWaypoint:d,updateWaypoint:u,generateRoute:m,clearRoute:(0,a.useCallback)(()=>{t([]),s([]),o(null)},[])}}(),k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,[s,n]=(0,a.useState)(0),[l,i]=(0,a.useState)([]),[o,c]=(0,a.useState)(0),[d,u]=(0,a.useState)(0),m=(0,a.useRef)(null),x=(0,a.useRef)(Date.now()),g=r.map(e=>[e.lat,e.lng]),b=(0,a.useCallback)((e,t,r,s)=>{let a=(r-e)*Math.PI/180,n=(s-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3},[]),h=(0,a.useCallback)(()=>{let e=0;for(let t=0;t<r.length-1;t++){let s=r[t],a=r[t+1];e+=b(s.lat,s.lng,a.lat,a.lng)}return e},[r,b]),p=(0,a.useCallback)(()=>{let e=0;for(let t=s;t<r.length-1;t++){let s=r[t],a=r[t+1];e+=b(s.lat,s.lng,a.lat,a.lng)}return e},[s,r,b]),f=(0,a.useCallback)(()=>{n(0),i(r.length>0?[[r[0].lat,r[0].lng]]:[]),c(0),u(0),x.current=Date.now()},[r]);return(0,a.useEffect)(()=>{r.length>0?f():(n(0),i([]),c(0),u(0))},[r,f]),(0,a.useEffect)(()=>(e&&r.length>0&&s<r.length-1?m.current=setInterval(()=>{n(e=>{if(e>=r.length-1)return e;let s=e+1,a=r[e],n=r[s],l=[n.lat,n.lng];i(e=>e.some(e=>e[0]===l[0]&&e[1]===l[1])?e:[...e,l]);let o=(n.timestamp-a.timestamp)/1e3,d=b(a.lat,a.lng,n.lat,n.lng);return c((o>0?d/o*3.6:0)*t),s}),u((Date.now()-x.current)/1e3)},Math.max(100,1e3/t)):m.current&&(clearInterval(m.current),m.current=null),()=>{m.current&&clearInterval(m.current)}),[e,s,t,r,b]),(0,a.useEffect)(()=>{x.current=Date.now()-1e3*d},[e,d]),{currentPosition:s<r.length?[r[s].lat,r[s].lng]:null,routePath:l,totalRoute:g,speed:o,elapsedTime:d,currentIndex:s,totalPoints:r.length,totalDistance:h(),remainingDistance:p(),reset:f}}(e,r,x);return((0,a.useEffect)(()=>{(async()=>{if(window.L)c(!0);else{let e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(e);let t=document.createElement("script");t.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",t.onload=()=>c(!0),document.head.appendChild(t)}})()},[]),o)?(0,s.jsxs)("div",{className:"relative w-full h-screen overflow-hidden bg-gray-900 ".concat(l?"fullscreen":""),children:[(0,s.jsx)(f,{currentPosition:k.currentPosition,routePath:k.routePath,isPlaying:e,totalRoute:k.totalRoute,waypoints:m,onMapClick:(e,t)=>{d&&h(e,t)},showRouteBuilder:d}),d&&(0,s.jsx)(R,{waypoints:m,onAddWaypoint:h,onRemoveWaypoint:p,onUpdateWaypoint:y,onGenerateRoute:j,onClearRoute:w,isGenerating:g,routeError:N,onClose:()=>u(!1),hasRoute:x.length>0}),(0,s.jsx)(b,{isPlaying:e,onTogglePlayPause:()=>{if(0===x.length){alert("Please create a route first by adding waypoints and generating the route.");return}t(!e)},onReset:()=>{t(!1),k.reset()},onToggleFullscreen:()=>{document.fullscreenElement?(document.exitFullscreen(),i(!1)):(document.documentElement.requestFullscreen(),i(!0))},onToggleRouteBuilder:()=>u(!d),speed:k.speed,elapsedTime:k.elapsedTime,currentCoordinates:k.currentPosition,playbackSpeed:r,onPlaybackSpeedChange:n,isFullscreen:l,showRouteBuilder:d,hasRoute:x.length>0}),x.length>0&&(0,s.jsx)(v,{currentIndex:k.currentIndex,totalPoints:k.totalPoints,distance:k.totalDistance,remainingDistance:k.remainingDistance})]}):(0,s.jsx)("div",{className:"w-full h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-full h-16 w-16 border-4 border-transparent border-r-blue-400 animate-pulse mx-auto"})]}),(0,s.jsx)("div",{className:"text-gray-700 font-medium",children:"Loading Vehicle Tracker..."}),(0,s.jsx)("div",{className:"text-gray-500 text-sm mt-2",children:"Initializing map components"})]})})}}},function(e){e.O(0,[77,971,117,744],function(){return e(e.s=2554)}),_N_E=e.O()}]);